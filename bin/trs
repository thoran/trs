#!/usr/bin/env ruby
# trs

# 20120401
# 0.6.0

# Changes since 0.5: 
# 0. None---version number bump.  

require_relative '../lib/Switches'
require_relative '../lib/ToyRobotSimulator'

switches = Switches.new do |s|
  s.set(:p, :program)
  s.set(:d, :directory, :programs_directory)
  s.set(:t, :tabletop, :tabletop_dimensions)
  s.set(:n, :number_of_toy_robots)
  s.set(:e?, :extras?)
  s.set(:r, :random)
end

# The order of setting attributes on ToyRobotSimulator is significant, which probably shouldn't be the case.  

trs = ToyRobotSimulator.new
trs.random = switches.random
trs.extras = switches.extras? || false
trs.program = switches.program if switches.program
trs.programs_directory = switches.programs_directory || File.join(File.dirname(__FILE__), '../programs')
trs.tabletop_dimensions = switches.tabletop_dimensions || '5x5'
trs.number_of_toy_robots = switches.number_of_toy_robots || 1
trs.random = switches.random
trs.run
